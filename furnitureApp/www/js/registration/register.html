
<ion-view view-title="Dashboard" cache-view="false" class="common-login-modal">
 
<ion-content class="loginmodal">
  <div class="login-container">
    <div class = "col button-row text-center">
     <img width="200px" src="img/logo.png">
     <br>
     <br>
      <h1 class="title">Registrarse</h1>
    <!--   <button class="button icon ion-social-facebook custombtn" ng-click="facebooklogin();"></button> -->
    </div>
    <div class="firstordiv">
      <div  class="firstordiv-border"></div>
      <!-- <span><strong>or</strong></span> -->
    </div>
    <form name="registerForm" class="formStyle padding" ng-submit="userRegister(registerForm);" novalidate >

      <label class="item item-input" ng-class="{ 'has-errors' : registerForm.fullname.$invalid, 'no-errors' : registerForm.fullname.$valid}"><input type="text" placeholder="Nombre" name="fullname"  ng-minlength="4" ng-maxlength="30" maxlength="30" ng-model="register.fullname" required></label>
      <div class="error-container" ng-show="registerForm.fullname.$error" ng-messages="registerForm.fullname.$error">
        <div ng-messages-include="error-list.html"></div>
      </div>

        <label class="item item-input" ng-class="{ 'has-errors' : registerForm.fathername.$invalid, 'no-errors' : registerForm.fathername.$valid}"><input type="text" placeholder="Apellido paterno" name="fathername"  ng-minlength="4" ng-maxlength="30" maxlength="30" ng-model="register.fathername" required></label>

          <div class="error-container" ng-show="registerForm.fathername.$error" ng-messages="registerForm.fathername.$error">
          <div ng-messages-include="error-list.html"></div>
      </div>

       <label class="item item-input" ng-class="{ 'has-errors' : registerForm.mothername.$invalid, 'no-errors' : registerForm.mothername.$valid}"><input type="text" placeholder="Apellido materno" name="mothername"  ng-minlength="4" ng-maxlength="30" maxlength="30" ng-model="register.mothername" required></label>
      <div class="error-container" ng-show="registerForm.mothername.$error" ng-messages="registerForm.mothername.$error">
        <div ng-messages-include="error-list.html"></div>
      </div>


      <label class="item item-input" ng-class="{ 'has-errors' : registerForm.useremail.$invalid, 'no-errors' : registerForm.useremail.$valid}"><input type="email" placeholder="Correo" name="useremail"  ng-model="register.useremail" required></label>
      <div class="error-container" ng-show="registerForm.useremail.$error" ng-messages="registerForm.useremail.$error">
        <div ng-messages-include="error-list.html"></div>
      </div>

       <label class="item item-input" ng-class="{ 'has-errors' : registerForm.cellphone.$invalid, 'no-errors' : registerForm.cellphone.$valid}"><input type="text" placeholder="Celular" name="cellphone"  ng-minlength="10" ng-maxlength="12" maxlength="12" ng-model="register.cellphone" required></label>
      <div class="error-container" ng-show="registerForm.cellphone.$error" ng-messages="registerForm.cellphone.$error">
        <div ng-messages-include="error-list-cellphon.html"></div>
      </div>

       <label class="item item-input" ng-class="{ 'has-errors' : registerForm.username.$invalid, 'no-errors' : registerForm.username.$valid}"><input type="text" placeholder="Usuario" name="username"  ng-minlength="4" ng-maxlength="30" maxlength="30" ng-model="register.username" required></label>
      <div class="error-container" ng-show="registerForm.username.$error" ng-messages="registerForm.username.$error">
        <div ng-messages-include="error-list.html"></div>
      </div>

      <!-- Password -->
      <label class="item item-input"  ng-class="{ 'has-errors' : registerForm.password.$invalid , 'no-errors' : registerForm.password.$valid}">
        <input type="password" placeholder="Contraseña" name="password" ng-minlength="8" ng-maxlength="20" maxlength="15" ng-model="register.password" >
      </label>
      <div class="error-container" ng-show="registerForm.password.$error" ng-messages="registerForm.password.$error">
        <div ng-messages-include="password-validate.html"></div>
      </div>

      <label class="item item-input"  ng-class="{ 'has-errors' : registerForm.confirm_password.$invalid , 'no-errors' : registerForm.confirm_password.$valid}">
        <input type="password" placeholder="Confirmar contraseña" name="confirm_password" ng-minlength="8" valid-password-c="register.password" ng-model="register.confirm_password" required>
      </label>
      
      <div  ng-show="registerForm.confirm_password.$error.noMatch" ng-messages="registerForm.confirm_password.$error" class="error-container">
        Passwords do not match
      </div>


        <div class="row">
            <div class="col">
                <label class="item item-input item-select">
                    <div class="input-label">
                      Tienda
                    </div>
                    <select ng-change="getStates()" name="store" ng-model="register.store">
                      <option ng-repeat="store in stores" value="{{store.id}}">{{store.nombre}}</option>
                    </select>
                 </label>
            </div>
        </div>
        
        <div class="row" ng-if="states">
            <div class="col">
                <label class="item item-input item-select">
                    <div class="input-label">
                      Estado
                    </div>
                    <select ng-change="getCities()" name="state" ng-model="register.state">
                      <option ng-repeat="state in states" value="{{state.id}}">{{state.nombre}}</option>
                    </select>
                 </label>
            </div>
        </div>
        <div class="row" ng-if="Cities">
            <div class="col">
                <label class="item item-input item-select">
                    <div class="input-label">
                      Ciudad
                    </div>
                    <select name="city" ng-change="getBranch()" ng-model="register.city">
                      <option ng-repeat="city in Cities" value="{{city.id}}">{{city.nombre}}</option>
                    </select>
                 </label>
            </div>
        </div>
        <div class="row" ng-if="branches">
            <div class="col">
                <label class="item item-input item-select">
                    <div class="input-label">
                      Branch
                    </div>
                    <select name="branch"  ng-model="register.branch">
                      <option ng-repeat="branch in branches" value="{{branch.id}}">{{branch.nombre}}</option>
                    </select>
                 </label>
            </div>
        </div>

        <label class="item item-input" ng-class="{ 'has-errors' : registerForm.code.$invalid, 'no-errors' : registerForm.code.$valid}"><input type="text" placeholder="código" name="code" ng-model="register.code" required></label>
            <div class="error-container" ng-show="registerForm.code.$error" ng-messages="registerForm.code.$error">
            <div ng-messages-include="error-list.html"></div>
      </div>


       <button class="button button-block  icon ion-log-in button-shadow" ng-disabled="registerForm.$invalid" id="submitbutton">Registrar</button>

        <div class="row bottom-section">
           <div class = "col text-center"><a href="#/forgetpass">Recuperar Contraseña</a></div>
           <div class = "col text-center link-color"><a href="#/login">Iniciar sesión</a></div>
       </div>

      </form>
  </div>

    <script id="error-list.html" type="text/ng-template">
      <div class="error" ng-message="minlength">  Minimum length of this field is 4 characters! </div>
      <div class="error" ng-message="maxlength">  Maximum length of this field is 30 characters!  </div>
      <div class="error" ng-message="email">  Please enter a valid email address  </div>
    </script>

    <script id="password-validate.html" type="text/ng-template">
      <div class="error" ng-message="minlength">   Minimum length of this field is 8 characters!. Use combination of alphanumerical values for secure password. </div>
      <div class="error" ng-message="maxlength">  Maximum length of this field is 20 characters!. Use combination of alphanumerical values for secure password.  </div>
    </script>

    <script id="error-list-cellphon.html" type="text/ng-template">
      <div class="error" ng-message="minlength">  Minimum length of this field is 10 characters! </div>
      <div class="error" ng-message="maxlength">  Maximum length of this field is 12 characters!  </div>
    </script>


   </ion-content>
</ion-view>
